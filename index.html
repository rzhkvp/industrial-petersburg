<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Индустриальный Петербург: от прошлого к настоящему</title>
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&family=PT+Sans+Caption:wght@700&display=swap" rel="stylesheet">
  <style>
    body { 
      font-family: 'Roboto', sans-serif; 
      margin: 0; 
      padding: 0; 
      line-height: 1.6;
      color: #333;
    }
    header { 
      background: #2c3e50; 
      color: white; 
      padding: 2em 1em; 
      text-align: center; 
    }
    h1 {
      font-family: 'PT Sans Caption', sans-serif;
      margin: 0;
      font-size: 2.2em;
    }
    #map { 
      height: 65vh;
      border-top: 3px solid #e74c3c;
      border-bottom: 3px solid #e74c3c;
    }
    .controls {
      background: #ecf0f1;
      padding: 1em;
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 20px;
      align-items: center;
    }
    .year-control {
      min-width: 300px;
    }
    .filter-control {
      display: flex;
      gap: 10px;
    }
    footer { 
      background: #2c3e50; 
      color: white;
      text-align: center; 
      padding: 1em;
      font-size: 0.9em;
    }
    .factory-popup img {
      max-width: 150px;
      height: auto;
      display: block;
      margin: 5px auto;
    }
    .factory-popup a {
      color: #e74c3c;
      text-decoration: none;
      font-weight: bold;
    }
    .factory-popup a:hover {
      text-decoration: underline;
    }
  </style>
</head>
<body>
  <header>
    <h1>Индустриальный Петербург: от прошлого к настоящему</h1>
    <p>Исследуйте историю промышленных предприятий Санкт-Петербурга через интерактивную карту</p>
  </header>

  <div id="map"></div>
  
  <div class="controls">
    <div class="year-control">
      <label for="yearRange"><strong>Год: </strong><span id="yearLabel">1900</span></label><br>
      <input type="range" id="yearRange" min="1700" max="2025" value="1900" step="5" style="width: 100%;">
    </div>
    
    <div class="filter-control">
      <strong>Фильтры: </strong>
      <label><input type="checkbox" class="industry-filter" value="shipbuilding" checked> Судостроение</label>
      <label><input type="checkbox" class="industry-filter" value="textile" checked> Текстиль</label>
      <label><input type="checkbox" class="industry-filter" value="metal" checked> Металлургия</label>
      <label><input type="checkbox" class="industry-filter" value="ceramics" checked> Керамика</label>

    </div>
  </div>

  <footer>
    <p>&copy; 2025 Проект "Индустриальный Петербург"</p>
    <p>Выполнили: Рожкова Полина Борисовна и Галибина Ксения Александровна</p>
    <p>Студентки 1 курса, группы V3145 (ИНТ4.1 и ИНТ4.3)</p>
  </footer>

  <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
  <script>
    // Инициализация карты
    const map = L.map('map').setView([59.93, 30.3], 12);
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
      attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
    }).addTo(map);

    // Данные о заводах
    const factories = [
    {
        name: 'Завод Чарльза Берда',
        coords: [59.924190, 30.274204],
        link: 'factories/berd_photos/berd.html',
        startYear: 1792,
        endYear: 1881,
        industry: 'metal',
        description: 'Первый в России частный механический и литейный завод. Производил паровые машины, пароходы, архитектурный декор.',
        image: 'img/berd_photos/berd_old.jpg'
      },
    {
  name: 'Адмиралтейские верфи',
  coords: [59.9295, 30.2910], // координаты приблизительно напротив Адмиралтейства
  link: 'factories/admiralteyskie_verfi.html',
  startYear: 1704,
  endYear: null,
  industry: 'shipbuilding',
  description: 'Первое промышленное предприятие Санкт-Петербурга. Лидер в судостроении с 1704 года.',
  image: 'img/admiralteyskie.jpg'
       },
     {
  name: 'Императорский фарфоровый завод',
  coords: [59.9348, 30.4481],  // приблизительные координаты рядом с ИФЗ
  link: 'factories/imperatorsky_farforovy.html',
  startYear: 1744,
  endYear: null,
  industry: 'ceramics',
  description: 'Первый в России фарфоровый завод, основан в 1744 году. Производит художественный и костяной фарфор.',
  image: 'img/farfor.jpg'
    },
    {
    name: 'Литейный двор',
    coords: [59.9500, 30.2700],
    link: 'factories/lit_dvor.html',
    startYear: 1721,
    endYear: 1800,
    industry: 'metal',
    description: 'Литейный и механический цех при Царскосельском дворе, поставлял пушки и колокола.',
    image: 'img/lit_dvor.jpg'
       },
     {
    name: 'Партикулярная верфь',
    coords: [59.9100, 30.2500],
    link: 'factories/partikulyarnaya_verf.html',
    startYear: 1833,
    endYear: 1899,
    industry: 'shipbuilding',
    description: 'Частная верфь, строившая торговые суда и баржи.',
    image: 'img/partikulyarnaya.jpg'
       },
      {
    name: 'Охтинский пороховой завод',
    coords: [59.9380, 30.4388],
    link: 'factories/okhta_zavod.html',
    startYear: 1703,
    endYear: 1860,
    industry: 'chemical',
    description: 'Первое пороховое производство в России, снабжало армию и флот.',
    image: 'img/okhta.jpg'
        },
      {
   name: 'Екатерингофский завод',
    coords: [59.897786, 30.261155],
    link: 'factories/ekaterinhof.html',
    startYear: 1711,
    endYear: 1800,
    industry: 'metal',
    description: 'Первый железоделательный и кузнечный завод на реке Екатерингофке, основан Петром I.',
    image: 'img/ekaterinhof.jpg'
        },
     {
    name: 'Сестрорецкий завод',
    coords: [60.1460, 29.8425],
    link: 'factories/sestroretsk.html',
    startYear: 1721,
    endYear: 1927,
    industry: 'metal',
    description: 'Оружейный и инструментальный завод на Сестрорецком озере.',
    image: 'img/sestroretsk.jpg'
        },
     {
    name: 'Ижорский завод',
    coords: [59.5320, 29.6458],
    link: 'factories/izhora.html',
    startYear: 1722,
    endYear: null,
    industry: 'metal',
    description: 'Крупнейшее машиностроительное и металлургическое предприятие на берегу Ижоры.',
    image: 'img/izhora.jpg'
  },

       {
    name: 'Казённый стеклянный завод',
    coords: [59.9350, 30.3500],
    link: 'factories/kazenny_steklo.html',
    startYear: 1747,
    endYear: 1910,
    industry: 'glass',
    description: 'Государственное стекольное производство для нужд флота и дворца.',
    image: 'img/kazenny_steklo.jpg'
  },
  

        {
    name: 'Монетный двор',
    coords: [59.9660, 30.3210],
    link: 'factories/monet_dvor.html',
    startYear: 1724,
    endYear: null,
    industry: 'mint',
    description: 'Государственный монетный двор, чеканил медные, серебряные и золотые монеты.',
    image: 'img/monet_dvor.jpg'
  },
  
       {
    name: 'Александровская мануфактура',
    coords: [59.9380, 30.3490],
    link: 'factories/alex_manuf.html',
    startYear: 1786,
    endYear: 1875,
    industry: 'textile',
    description: 'Крупная хлопкоочистительная и ткацкая мануфактура, давшая начало целому району (Александровская слобода).',
    image: 'img/alex_manuf.jpg'
  },  

      {
        name: 'Александро-Невская мануфактура',
        coords: [59.900601, 30.429577],
        link: 'factories/an_manufaktura.html',
        startYear: 1837,
        endYear: 2003,
        industry: 'textile',
        description: 'Крупнейшее текстильное производство. Выпускало ситец, смесовые ткани.',
        image: 'img/an_manufaktura.jpg'
      }, 

        {
  name: 'Александровский чугунолитейный завод',
  coords: [59.902, 30.426], // Координаты по адресу пр. Обуховской Обороны
  link: 'factories/alexandrovsky.html',
  startYear: 1824,
  endYear: null,
  industry: 'metal',
  description: 'Один из старейших заводов Петербурга, производивший паровозы, а ныне - судовое оборудование.',
  image: 'img/alexandrovsky_photos/zavod.jpeg'
},  

        {
  name: 'Балтийский завод',
  coords: [59.922, 30.244], // Координаты Косой линии, 16
  link: 'factories/baltic.html',
  startYear: 1856,
  endYear: null,
  industry: 'shipbuilding',
  description: 'Флагман отечественного кораблестроения, строитель атомных ледоколов и военных кораблей.',
  image: 'img/baltic_photos/panorama.jpeg'
},
    
         {
  name: 'Невский судостроительный завод',
  coords: [59.925, 30.400], // Примерные координаты
  link: 'factories/nevsky_shipyard.html',
  startYear: 1857,
  endYear: null,
  industry: 'shipbuilding',
  description: 'Основан в 1857 году - производил суда, паровозы, а ныне - энергетическое оборудование.',
  image: 'img/nevsky_shipyard_photos/zda.jpeg'
},

       {
  name: 'Ленинградский металлический завод (ЛМЗ)',
  coords: [59.960116, 30.385856], // Свердловская наб., 18, Санкт-Петербург :contentReference[oaicite:0]{index=0}
  link: 'factories/lmz.html',
  startYear: 1857,
  endYear: null,
  industry: 'машиностроение и энергетика',
  description: 'Советское и российское энергомашиностроительное предприятие, проектирует и выпускает паровые, гидравлические и газовые турбины. Основан как «Компания Санкт-Петербургского металлического завода» в 1857 г. и вошёл в состав АО «Силовые машины».',
  image: 'img/lmz_photos/lmz_header.jpg'
},
        {
        name: 'Обуховский завод',
        coords: [59.863165, 30.475885],
        link: 'factories/obukhov.html',
        startYear: 1863,
        endYear: null,
        industry: 'metal',
        description: 'Крупнейший сталелитейный завод России. Производил броню для кораблей, артиллерийские орудия.',
        image: 'img/obukhov_photos/obuhovsky.jpeg'
      },

      {
        name: 'Красный треугольник',
        coords: [59.914, 30.295],
        link: 'factories/krasny.html',
        startYear: 1860,
        endYear: 2004,
        industry: 'textile',
        description: 'Крупнейшее в России предприятие по производству резиновых изделий.',
        image: 'img/krasny_photos/old.webp'
      },

        {
        name: 'Вагоностроительный завод им. И.Е. Егорова',
        coords: [59.9213, 30.3175],
        link: 'factories/egorov.html',
        startYear: 1874,
        endYear: null,
        industry: 'metal',
        description: 'Исторический вагоностроительный завод Санкт-Петербурга, выпускает вагоны для метрополитена и ж/д транспорта.',
        image: 'img/egorov.jpg'
      },

       {
  name: 'Красное знамя',
  coords: [59.960, 30.295],
  link: 'factories/krasnoe_znamya.html',
  startYear: 1855,
  endYear: 2000,
  industry: 'textile',
  description: 'Крупнейшая трикотажная фабрика России и СССР.',
  image: 'img/krasnoe_znamya_photos/glav.jpeg'
},
     

         {
  name: 'Сименс-Гальске (Севкабель)',
  coords: [59.924402, 30.242036], // Кожевенная линия, 40, Санкт-Петербург
  link: 'factories/siemens.html',
  startYear: 1853,
  endYear: null,
  industry: 'metal',
  description: 'Первый кабельный завод России, основанный компанией Siemens & Halske.',
  image: 'img/siemens_photos/old_.jpeg'
},

       {
  name: 'Кировский завод',
  coords: [59.883333, 30.250000],
  link: 'factories/kirov.html',
  startYear: 1801,
  endYear: null,
  industry: 'машиностроение и металлургия',
  description: 'Одно из старейших машиностроительных и металлургических предприятий России, расположенное между проспектом Стачек и рекой Екатерингофкой.',
  image: 'img/kirov_photos/kirov_header.jpg'
},

         {
  name: 'Машиностроительный завод «Арсенал»',
  coords: [59.954507, 30.372139], // Арсенальная наб., 1, Санкт-Петербург :contentReference[oaicite:0]{index=0}
  link: 'factories/arsenal.html',
  startYear: 1711,
  endYear: null,
  industry: 'машиностроение и металлургия',
  description: 'ОАО «Машиностроительный завод „Арсенал“» — российское промышленное предприятие в Калининском районе, входит в госкорпорацию „Роскосмос“; основан в 1711 году как Пушечный литейный двор.',
  image: 'img/arsenal_photos/arsenal_header.jpg'
},
    
       {
  name: 'ЛОМО (Ленинградское оптико-механическое объединение)',
  coords: [59.970177, 30.356984], // ул. Чугунная, д. 20, Санкт-Петербург :contentReference[oaicite:0]{index=0}
  link: 'factories/lomo.html',
  startYear: 1914,
  endYear: null,
  industry: 'оптика и приборостроение',
  description: 'Российская компания по производству и реализации оптико-механических и оптоэлектронных приборов, ведёт историю с 1914 г. В мае 2024 г. вошла в концерн «Калашников».',
  image: 'img/lomo_photos/lomo_header.jpg'
},

       {
  name: 'Завод «Светлана»',
  coords: [59.946580, 30.339250], // проспект Энгельса, 27, Санкт-Петербург :contentReference[oaicite:0]{index=0}
  link: 'factories/svetlana.html',
  startYear: 1913,
  endYear: null,
  industry: 'радиоэлектроника и приборостроение',
  description: 'Советский и российский холдинг по разработке и выпуску мощных электровакуумных приборов и изделий микроэлектроники; более 20 % продукции идёт на экспорт.',
  image: 'img/svetlana_photos/svetlana_header.jpg'
},

        {
  name: 'Завод «Красный Выборжец»',
  coords: [59.958057, 30.378651], // Свердловская набережная, 12, Санкт-Петербург :contentReference[oaicite:0]{index=0}
  link: 'factories/krasny_vyborzhets.html',
  startYear: 1857,
  endYear: null,
  industry: 'metal',
  description: 'Советское и российское предприятие по обработке цветных металлов, выпускающее более 12 000 наименований плоского и круглого проката; с 1922 г. носит нынешнее название.',
  image: 'img/krasny_vyborzhets_photos/krasny_header.jpg'
},

       {
  name: 'Фабрика «Ударница»',
  coords: [55.724839, 37.612182], // улица Шаболовка, 13, Москва :contentReference[oaicite:0]{index=0}
  link: 'factories/udaritsa.html',
  startYear: 1929,
  endYear: null,
  industry: 'кондитерское производство',
  description: 'Старейший российский производитель зефира, пастилы, мармелада и клюквы в сахарной пудре; основана в 1929 году на базе пивоваренного завода «Карнеева, Горшанова и Ко».',
  image: 'img/udaritsa_photos/udaritsa_header.jpg'
}, 


        {
  name: 'Завод «Пигмент»',
  coords: [59.905588, 30.434931], // Октябрьская набережная, 38 :contentReference[oaicite:0]{index=0}
  link: 'factories/pigment.html',
  startYear: 1934,
  endYear: null,
  industry: 'химическая промышленность',
  description: 'НПО «Пигмент», образованное в 1976 г.; ведёт историю от Киновиевского ультрамаринового завода Г. И. Веге (основан 1876 г.), с 1934 г. входил в структуру Невского химического завода; выпускает более 1500 наименований лакокрасочной и химической продукции.',
  image: 'img/pigment_photos/pigment_header.jpg'
},



        {
  name: 'Фабрика «Балтика»',
  coords: [60.076040, 30.365464], // 6-й Верхний переулок, 3, Санкт-Петербург :contentReference[oaicite:0]{index=0}
  link: 'factories/baltika.html',
  startYear: 1990,
  endYear: null,
  industry: 'пищевая промышленность',
  description: 'Открытое акционерное общество «Пивоваренная компания „Балтика“» основано в 1990 г. в СПб, с 1998 г. зарегистрировано под именем ОАО «Балтика». Крупнейший пивоваренный холдинг России, вторая по величине пивоваренная компания в Европе с долей свыше 38 % на российском рынке. С 2001 г. котируется на бирже RTS, с 2012 г. входит в Carlsberg Group, чьи акции экспроприированы правительством РФ в июле 2023 г. и проданы менеджменту в декабре 2024 г.',
  image: 'img/baltika_photos/baltika_header.jpg'
}


    
    
    
      
      
];

    let currentMarkers = [];
    let activeIndustries = ['shipbuilding', 'textile', 'metal'];

    function updateMap(year) {
      currentMarkers.forEach(m => map.removeLayer(m));
      currentMarkers = [];

      factories.forEach(factory => {
        const yearActive = year >= factory.startYear && (factory.endYear === null || year <= factory.endYear);
        const industryActive = activeIndustries.includes(factory.industry);
        
        if (yearActive && industryActive) {
          const popupContent = `
            <div class="factory-popup">
              <h3>${factory.name}</h3>
              ${factory.image ? `<img src="${factory.image}" alt="${factory.name}">` : ''}
              <p>${factory.description}</p>
              <p><strong>Годы работы:</strong> ${factory.startYear} — ${factory.endYear || 'н.в.'}</p>
              <a href="${factory.link}">Подробнее →</a>
            </div>
          `;
          
          const marker = L.marker(factory.coords, {
            icon: getIconForIndustry(factory.industry)
          }).addTo(map)
            .bindPopup(popupContent, {maxWidth: 300});
          
          currentMarkers.push(marker);
        }
      });
    }

    function getIconForIndustry(industry) {
      const iconColors = {
        'shipbuilding': 'blue',
        'textile': 'red',
        'metal': 'orange'
      };
      
      return L.icon({
        iconUrl: `https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-${iconColors[industry] || 'grey'}.png`,
        shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png',
        iconSize: [25, 41],
        iconAnchor: [12, 41],
        popupAnchor: [1, -34],
        shadowSize: [41, 41]
      });
    }

    const yearRange = document.getElementById('yearRange');
    const yearLabel = document.getElementById('yearLabel');
    const industryFilters = document.querySelectorAll('.industry-filter');

    yearRange.addEventListener('input', () => {
      const year = parseInt(yearRange.value);
      yearLabel.textContent = year;
      updateMap(year);
    });

    industryFilters.forEach(filter => {
      filter.addEventListener('change', () => {
        activeIndustries = Array.from(industryFilters)
          .filter(f => f.checked)
          .map(f => f.value);
        updateMap(parseInt(yearRange.value));
      });
    });

    updateMap(parseInt(yearRange.value));
  </script>
</body>
</html>
